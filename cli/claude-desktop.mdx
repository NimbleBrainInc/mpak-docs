---
title: "Claude Desktop Integration"
description: "Use mpak bundles with Claude Desktop"
---

Claude Desktop supports MCP servers natively. mpak makes it easy to add servers from the registry.

## Configuration File Location

<CodeGroup>
```bash macOS
~/Library/Application Support/Claude/claude_desktop_config.json
```

```bash Windows
%APPDATA%\Claude\claude_desktop_config.json
```

```bash Linux
~/.config/Claude/claude_desktop_config.json
```
</CodeGroup>

## Basic Setup

Add an MCP server from mpak:

```json
{
  "mcpServers": {
    "echo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/echo"]
    }
  }
}
```

Restart Claude Desktop to load the server.

## Multiple Servers

```json
{
  "mcpServers": {
    "echo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/echo"]
    },
    "ipinfo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/ipinfo"],
      "env": {
        "IPINFO_API_TOKEN": "your-token"
      }
    },
    "postgres": {
      "command": "mpak",
      "args": ["bundle", "run", "@owner/postgres-mcp"],
      "env": {
        "DATABASE_URL": "postgresql://localhost:5432/mydb"
      }
    }
  }
}
```

## Passing Configuration

For servers that require configuration (API keys, etc.), pass environment variables:

```json
{
  "mcpServers": {
    "ipinfo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/ipinfo"],
      "env": {
        "IPINFO_API_TOKEN": "your-token-here"
      }
    }
  }
}
```

Check the bundle's documentation for required environment variables.

## Pin to a Specific Version

By default, `mpak bundle run` uses the cached version (or downloads latest if not cached). To pin to a specific version:

```json
{
  "mcpServers": {
    "echo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/echo@1.0.0"]
    }
  }
}
```

## Force Updates

To update to the latest version on each launch (slower startup):

```json
{
  "mcpServers": {
    "echo": {
      "command": "mpak",
      "args": ["bundle", "run", "@nimblebraininc/echo", "--update"]
    }
  }
}
```

## Troubleshooting

### Server Not Appearing

1. Check your JSON is valid (no trailing commas)
2. Restart Claude Desktop completely
3. Check `mpak bundle run @package/name` works in terminal

### Command Not Found

Ensure mpak is installed globally and in your PATH:

```bash
npm install -g @nimblebrain/mpak
which mpak  # Should show the path
```

If using a version manager (nvm, volta), you may need to specify the full path:

```json
{
  "mcpServers": {
    "echo": {
      "command": "/Users/you/.nvm/versions/node/v20.0.0/bin/mpak",
      "args": ["bundle", "run", "@nimblebraininc/echo"]
    }
  }
}
```

### View Logs

Check Claude Desktop logs for MCP server errors:

<CodeGroup>
```bash macOS
tail -f ~/Library/Logs/Claude/mcp*.log
```

```bash Windows
# Check %APPDATA%\Claude\logs\
```
</CodeGroup>
